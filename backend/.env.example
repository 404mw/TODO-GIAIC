# Perpetua Flow Backend Environment Variables
# Copy this file to .env and fill in your values

# =============================================================================
# DATABASE
# =============================================================================
# Neon Serverless PostgreSQL connection string
# Format: postgresql+asyncpg://user:password@hostname/database?sslmode=require
DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/perpetua_flow

# =============================================================================
# JWT CONFIGURATION
# =============================================================================
# Generate keys with:
#   mkdir -p keys
#   openssl genrsa -out keys/private.pem 2048
#   openssl rsa -in keys/private.pem -pubout -out keys/public.pem
#
# OPTION A: Reference key files (recommended for local development)
JWT_PRIVATE_KEY_PATH=./keys/private.pem
JWT_PUBLIC_KEY_PATH=./keys/public.pem

# OPTION B: Inline keys (required for Railway/production - uncomment and paste keys)
# JWT_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----
# ...paste your private key here...
# -----END PRIVATE KEY-----"
#
# JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----
# ...paste your public key here...
# -----END PUBLIC KEY-----"

JWT_ALGORITHM=RS256
JWT_ACCESS_EXPIRY_MINUTES=15
JWT_REFRESH_EXPIRY_DAYS=7

# =============================================================================
# GOOGLE OAUTH
# =============================================================================
# Google Cloud Console credentials
GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-client-secret

# =============================================================================
# OPENAI (AI FEATURES)
# =============================================================================
OPENAI_API_KEY=sk-...
OPENAI_MODEL=gpt-4-turbo

# =============================================================================
# DEEPGRAM (VOICE TRANSCRIPTION)
# =============================================================================
DEEPGRAM_API_KEY=your-deepgram-api-key

# =============================================================================
# WEBPUSH (PUSH NOTIFICATIONS - FR-028a)
# =============================================================================
# VAPID private key for WebPush (generate with: npx web-push generate-vapid-keys)
VAPID_PRIVATE_KEY=
# Contact email for VAPID
VAPID_CONTACT_EMAIL=admin@perpetua.flow

# =============================================================================
# CHECKOUT.COM (PAYMENTS)
# =============================================================================
CHECKOUT_SECRET_KEY=sk_...
CHECKOUT_WEBHOOK_SECRET=whsec_...

# =============================================================================
# RATE LIMITS (FR-061)
# =============================================================================
# Requests per minute
RATE_LIMIT_GENERAL=100
RATE_LIMIT_AI=20
RATE_LIMIT_AUTH=10

# =============================================================================
# AI CREDITS CONFIGURATION
# =============================================================================
AI_CREDIT_CHAT=1
AI_CREDIT_SUBTASK=1
AI_CREDIT_CONVERSION=1
AI_CREDIT_TRANSCRIPTION_PER_MIN=5
KICKSTART_CREDITS=5
PRO_DAILY_CREDITS=10
PRO_MONTHLY_CREDITS=100
MAX_CREDIT_CARRYOVER=50

# =============================================================================
# TIER LIMITS
# =============================================================================
FREE_MAX_TASKS=50
PRO_MAX_TASKS=200
FREE_MAX_SUBTASKS=4
PRO_MAX_SUBTASKS=10
FREE_MAX_NOTES=10
PRO_MAX_NOTES=25
FREE_DESC_MAX_LENGTH=1000
PRO_DESC_MAX_LENGTH=2000

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_VOICE_TRANSCRIPTION=true

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
# Environment: development, staging, production
ENVIRONMENT=development

# Debug mode (DO NOT enable in production)
DEBUG=false

# Allowed CORS origins (JSON array or comma-separated)
CORS_ORIGINS=["http://localhost:3000","http://localhost:5173"]

# API base URL
API_BASE_URL=http://localhost:8000
